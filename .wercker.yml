box:
  id: python:3.5-alpine
  cmd: /bin/sh

# This is the build pipeline. Pipelines are the core of wercker
# Read more about pipelines on our dev center
# http://devcenter.wercker.com/docs/pipelines/index.html
build:
  # The steps that will be executed on build
  # Steps make up the actions in your pipeline
  # Read more about steps on our dev center:
  # http://devcenter.wercker.com/docs/steps/index.html
  steps:
    - script:
        name: install packages
        code: apk add --update git patch
    - pip-install
    - script:
        name: flask tests
        code: py.test --cov-report term-missing --cov=server tests/
    - script:
        name: clean environ
        code: ./manage.py clean